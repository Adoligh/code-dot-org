// New private scope -- a lot of this is boilerplate for class structures, taken from coffeescript
(function() {
  var
    __bind = function(fn, me){ return function(){ return fn.apply(me, arguments); }; },
    __hasProp = {}.hasOwnProperty,
    __extends = function(child, parent) { for (var key in parent) { if (__hasProp.call(parent, key)) child[key] = parent[key]; } function ctor() { this.constructor = child; } ctor.prototype = parent.prototype; child.prototype = new ctor(); child.__super__ = parent.prototype; return child; },
    __indexOf = [].indexOf || function(item) { for (var i = 0, l = this.length; i < l; i++) { if (i in this && this[i] === item) return i; } return -1; };


  // class HeaderStore extends UIStore
      /**
     * @param data {{
     *   title: string,
     *   finishLink: string,
     *   showStageLinks: boolean,
     *   trophies: Object,
     *   levels: Array.<{
     *     displayText: string,
     *     status: string,
     *     unplugged: boolean,
     *     assessment: boolean
     *   }>
     * }}
     */
  HeaderStore = (function(_super) {
    __extends(HeaderStore, _super);

    // Must have a constructor
    function HeaderStore() {
      return HeaderStore.__super__.constructor.apply(this, arguments);
    }

    HeaderStore.prototype.resolveUrl = function(args, dataType) {
      return "/popup/progress";
    }

    HeaderStore.prototype.resolveStatic = function(args) {
      return "/level-" + (args.script_name || args.script_id) + "-" + (args.stage_id || "1") + "-" + args.level_id;
    }

    return HeaderStore;
  })(UIStore);



  // ScriptStore: load the script progress (used in the header dropdown)
  ScriptStore = (function(_super) {
    __extends(ScriptStore, _super);

    // Must have a constructor
    function ScriptStore() {
      return ScriptStore.__super__.constructor.apply(this, arguments);
    }

    ScriptStore.prototype.resolveUrl = function(args, dataType) {
      return "/popup/script";
    }

    ScriptStore.prototype.resolveStatic = function(args) {
      return "/script-" + (args.script_name || args.script_id);
    }

    return ScriptStore;
  })(UIStore);

  // For now, create a global.  Later, this should be in module.exports
  // (Note these are already global since they're not declared via 'var'.
  window.HeaderBar = HeaderBar;
  window.HeaderStore = HeaderStore;

}).call(this);
